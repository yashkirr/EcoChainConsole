<template>
  <div class="form-wizard-outer">

  <h1 text: center> ESG Submission </h1>
    <br>
    <br>
    <FormWizard @on-complete="onComplete" 
                color="#219653"
                step-size="xs"
                back-button-text="Back to previous section"
                next-button-text="Next section"
                finish-button-text="Submit">

      <div class="form-wizard-container">
      <TabContent title="Submission Info" icon="ti-wallet" text-center>
          <BackgroundInfo/>
        </TabContent>
        <TabContent title="People" icon="ti-user">
          <PeoplePage ref="PeoplePage" />
        </TabContent>
        <TabContent title="Governance" icon="ti-shield">
          <GovernancePage ref="GovernancePage"/>
        </TabContent>
        <TabContent title="Planet" icon="ti-world">
          <PlanetPage ref="PlanetPage" />
        </TabContent>
        <TabContent title="Prosperity" icon="ti-wallet">
          <ProsperityPage ref="ProsperityPage" />
        </TabContent>

        <TabContent title="Review and Submit" icon="ti-check-box">
          <div>{{ getSectionStatus('PeoplePage') }}</div>
          <div></div>
          
      <table>
        <thead>
          <tr>
            <td colspan="4">
              <h1>Submission Information</h1>
            </td>
          </tr>
        </thead>
  
        <tbody>
          <tr>
            <td>Company</td>
            <td>[Name of Company]</td>
            <td>Submitted by</td>
            <td>[Name of Submitter]</td>
          </tr>
          <tr>
            <td>Submission Period</td>
            <td colspan="3">01 May 2022 - 30 April 2023</td>
          </tr>
          <tr>
            <td colspan="4">
              <table>
                <tbody>
                  <tr>
                    <td>Sections included in Submission</td>
                    <td></td>
                  </tr>
                </tbody>
                <tbody>
                  <tr>
                    <td>People</td>
                    <td><div>{{ getSectionStatus('PeoplePage') }}</div></td>
                  </tr>
                  <tr>
                    <td>Planet</td>
                    <td>{{ getSectionStatus('PlanetPage') }}</td>
                  </tr>
                  <tr>
                    <td>Prosperity</td>
                    <td>{{ getSectionStatus('ProsperityPage') }}</td>
                  </tr>
                  <tr>
                    <td>Governance</td>
                    <td>{{ getSectionStatus('GovernancePage') }}</td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
        </tbody>
      </table>
      Once Submitted, a PDF will be generated for the report, a record will be stored on the Blockchain, and an NFT will be minted as certification. Please note that this is irreversible.
    
          
        </TabContent>
      </div>
    </FormWizard>
  </div>
</template>


<script>
// Local registration
import { FormWizard, TabContent } from "vue3-form-wizard";
import "vue3-form-wizard/dist/style.css";
import BackgroundInfo from './BackgroundInfo.vue';
import PeoplePage from './PeoplePage.vue';
import GovernancePage from './GovernancePage.vue';
import PlanetPage from './PlanetPage.vue'; 
import ProsperityPage from './ProsperityPage.vue';



export default {
  components: {
    FormWizard,
    TabContent,
    BackgroundInfo,
    PeoplePage,
    GovernancePage,
    PlanetPage,
    ProsperityPage
  },
  methods: {
  onComplete() {
    this.$router.push({ name: 'SuccessPage' }); // Using named route
    // or
    // this.$router.push('/SuccessPage'); // Using path directly
  },
  getSectionStatus(section) {
      // Determine the status of a section based on the page's data
      const pageData = this.$refs[section];
      if (pageData && pageData.sectionStatus) {
        return pageData.sectionStatus;
      }
      return 'N/A';
    },
},
  
};
</script>

<style>
@import url("https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css");

.form-wizard-container {
  background-color: white;
  padding: 20px 30px 20px 40px; 
  margin: 10px 10px ;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
 
  overflow: auto;
}
.form-wizard-outer {
  padding: 50px;
}
</style>
